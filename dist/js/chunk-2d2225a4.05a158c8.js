(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2225a4"],{cdf3:function(s,a,t){"use strict";t.r(a);var e=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",[t("md")],1)},r=[],n=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},l=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h3",[s._v("å®ç°ç›®æ ‡")]),t("ul",[t("li",[t("p",[s._v("æ’å€¼ç»‘å®š")]),t("ul",[t("li",[s._v("åœ¨ "),t("code",{pre:!0},[s._v("html")]),s._v(" ä¸­ ç»‘å®š "),t("code",{pre:!0},[s._v("counter")])]),t("li",[s._v("åˆå§‹åŒ–æ˜¾ç¤º "),t("code",{pre:!0},[s._v("1")])]),t("li",[s._v("é—´éš” 1sï¼Œ"),t("code",{pre:!0},[s._v("counter")]),s._v(" åŠ  1")])])]),t("li",[t("p",[t("code",{pre:!0},[s._v("v-html")]),s._v("ï¼šæ˜¾ç¤ºä¸€æ®µ "),t("code",{pre:!0},[s._v("html")])])]),t("li",[t("p",[t("code",{pre:!0},[s._v("v-model")]),s._v("ï¼šå®ç°åŒå‘ç»‘å®š")])]),t("li",[t("p",[t("code",{pre:!0},[s._v("@click")]),s._v("ï¼šå®ç°ç‚¹å‡»äº‹ä»¶")])])]),t("p",[s._v("æ•ˆæœå¦‚ä¸‹ï¼š")]),t("img",{attrs:{src:"https://relearnvue.com/static/mvvm.gif"}}),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-HTML"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"app"')]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("{{counter}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"clickHandle"')]),s._v(">")]),s._v("{{count}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-html")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"htmlContent"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(" />")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("{{username}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("src")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./mvvm.js"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" app = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Mvvm({\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("el")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("counter")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'æˆ‘å«å°çº¢'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("htmlContent")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"<span style='color: red;'>å˜»å˜»</span>\"")]),s._v("\n      },\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n        clickHandle() {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".count++\n        }\n      }\n    })\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ”¹å˜counter")]),s._v("\n    setInterval("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n      app.counter++\n    }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1000")]),s._v(")\n  ")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("çœ‹èµ·æ¥å¾ˆç®€å•å•Š ğŸ˜† ï¼Œ è‡ªå·±å®ç°ä¸€ä¸‹è¯•è¯•")]),t("h3",[s._v("mvvm è¦åšçš„äº‹")]),t("ol",[t("li",[s._v("å¯¹ "),t("code",{pre:!0},[s._v("data")]),s._v(" æ•°æ®è¿›è¡Œå“åº”å¼å¤„ç†")]),t("li",[t("code",{pre:!0},[s._v("{{}}")]),s._v("ã€"),t("code",{pre:!0},[s._v("v-model")]),s._v("ã€"),t("code",{pre:!0},[s._v("v-html")]),s._v("ã€"),t("code",{pre:!0},[s._v("@click")]),s._v("å¹¶ä¸æ˜¯åŸç”Ÿçš„ "),t("code",{pre:!0},[s._v("html")]),s._v(" æ ‡è®°ï¼Œéœ€è¦è¿›è¡Œè§£æï¼Œå¹¶ä» "),t("code",{pre:!0},[s._v("data")]),s._v(" ä¸­å–å‡ºå¯¹åº”çš„å€¼ï¼Œåˆå§‹åŒ–é¡µé¢")]),t("li",[s._v("å¯¹ "),t("code",{pre:!0},[s._v("html")]),s._v(" ä¸­ç”¨åˆ°çš„æ•°æ®è¿›è¡Œæ”¶é›†ï¼Œå½“è¯¥å€¼å˜åŒ–æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰ç”¨åˆ°çš„åœ°æ–¹è¿›è¡Œæ›´æ–°")])]),t("p",[s._v("ä¸ºäº†è§£å†³ä¸Šé¢å‡ ä¸ªé—®é¢˜ï¼Œåˆ›å»ºä¸€äº›ç±»æ¥è´Ÿè´£å¯¹åº”çš„å·¥ä½œï¼š")]),t("ul",[t("li",[s._v("Observeï¼šè´Ÿè´£æ•°æ®å“åº”å¼å¤„ç†")]),t("li",[s._v("Compileï¼šè§£ææ¨¡æ¿ï¼Œç»™æ¯ä¸€ä¸ª key åˆ›å»ºä¸€ä¸ª watcher")]),t("li",[s._v("Watcherï¼šè´Ÿè´£æ‰§è¡Œæ›´æ–°å‡½æ•°ï¼ˆæ¯ä¸€ä¸ªæ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®éƒ½ä¼šå¯¹åº”ä¸€ä¸ª Watcherï¼‰")]),t("li",[s._v("Depï¼šæ”¶é›† Watcherï¼ˆåŒä¸€ä¸ª key å¯èƒ½åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡ä½¿ç”¨ï¼Œå½“æ•°æ®æ›´æ–°æ—¶ï¼Œé€šçŸ¥ Depï¼ŒDep é€šçŸ¥å®ƒæ”¶é›†åˆ°çš„æ‰€æœ‰ Watcher æ‰§è¡Œæ›´æ–°ï¼‰")])]),t("h3",[s._v("åŸç†å›¾ï¼š")]),t("img",{staticStyle:{width:"800px"},attrs:{src:"https://relearnvue.com/static/mvvm.png"}}),t("h3",[s._v("Dep")]),t("p",[s._v("Dep åªåšä¸¤ä»¶äº‹æƒ…")]),t("ul",[t("li",[s._v("æ”¶é›† watcherï¼ˆåœ¨å“ªé‡Œæ”¶é›†ï¼Ÿï¼‰")]),t("li",[s._v("é€šçŸ¥æ›´æ–°ï¼ˆåœ¨å“ªé‡Œé€šçŸ¥æ›´æ–°ï¼Ÿï¼‰")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Dep")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("() {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".deps = []\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ·»åŠ watcher")]),s._v("\n  addDep(watcher) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".deps.push(watcher)\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// é€šçŸ¥æ›´æ–°ï¼Œéå†æ¯ä¸€ä¸ªwatcherï¼Œç„¶åwatcherè°ƒç”¨è‡ªå·±çš„updateæ–¹æ³•")]),s._v("\n  notify() {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".deps.forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("watcher")]),s._v(" =>")]),s._v(" watcher.update())\n  }\n}\n")])]),t("h3",[s._v("Watcher")]),t("p",[s._v("ç¼–è¯‘è§£ææ¨¡æ¿æ—¶ï¼Œæ¯é‡åˆ°ä¸€ä¸ª "),t("code",{pre:!0},[s._v("key")]),s._v("ï¼Œå°±ä¸ºå®ƒåˆ›å»ºä¸€ä¸ª "),t("code",{pre:!0},[s._v("watcher")]),s._v(" å¯¹è±¡ï¼Œåœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šè¯»å–ä¸€æ¬¡ï¼Œæ˜¯ä¸ºäº†è§¦å‘ "),t("code",{pre:!0},[s._v("getter")]),s._v(" æ–¹æ³•ï¼Œå°†è¯¥ "),t("code",{pre:!0},[s._v("watcher")]),s._v(" æ·»åŠ åˆ° "),t("code",{pre:!0},[s._v("Dep")]),s._v(" ä¸­")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Watcher")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// updateFnå°±æ˜¯æ›´æ–°æ–¹æ³•")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("(vm, key, updateFn) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".vm = vm\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".key = key\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".updateFn = updateFn\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å°†å½“å‰watcherè®¾ç½®ç»™Dep.target")]),s._v("\n    Dep.target = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è¯»å–ä¸€æ¬¡keyï¼Œè§¦å‘getterï¼Œæ”¶é›†è¯¥watcher")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".vm["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".key]\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ¸…é™¤")]),s._v("\n    Dep.target = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v("\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ›´æ–°æ–¹æ³•")]),s._v("\n  update() {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".updateFn.call("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".vm, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".vm["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".key])\n  }\n}\n")])]),t("h3",[s._v("Observe")]),t("p",[s._v("æ•°æ®å“åº”å¼")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Observe")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("(value) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".value = value\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æºç ä¸­ä¼šåŒºåˆ†å¯¹è±¡å’Œæ•°ç»„ï¼Œè¿™é‡Œå¿½ç•¥...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".walk(value)\n  }\n\n  walk(obj) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å¯¹æ¯ä¸€ä¸ªkeyè¿›è¡Œå“åº”ä¹¦å¤„ç†")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(obj).forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("key")]),s._v(" =>")]),s._v(" {\n      defineReactive(obj, key, obj[key])\n    })\n  }\n\n  defineReactive(obj, key, val) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è¿™é‡Œéœ€è¦å¯¹valé€’å½’å¤„ç†ï¼Œç•¥å»...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ¯ä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªdep")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dep = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Dep()\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(obj, key, {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("get")]),s._v("() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'è¯»å–ï¼š'")]),s._v(", key)\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å½“åˆ›å»ºwatcheræ—¶ï¼ŒDep.targetä¼šæŒ‡å‘å½“å‰watcherï¼Œæ·»åŠ åˆ°depä¸­")]),s._v("\n        Dep.target && dep.addDep(Dep.target)\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" val\n      },\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("set")]),s._v("(newVal) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (newVal !== val) {\n          "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'è®¾ç½®ï¼š'")]),s._v(", key)\n          observe(newVal)\n          val = newVal\n          "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// é€šçŸ¥æ›´æ–°")]),s._v("\n          dep.notify()\n        }\n      }\n    })\n  }\n}\n")])]),t("h3",[s._v("Compile")]),t("p",[s._v("æ¨¡æ¿ç¼–è¯‘ï¼šéå†æ¨¡æ¿ï¼Œè§£æå‡º "),t("code",{pre:!0},[s._v("vue")]),s._v(" ç‰¹æœ‰çš„æŒ‡ä»¤ã€è¯­æ³•ç³–ç­‰ï¼Œåˆ†åˆ«å¤„ç†")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Compile")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("(el, vm) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm = vm\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$el = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector(el)\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$el) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".compile("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$el)\n    }\n  }\n\n  compile(el) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// éå†èŠ‚ç‚¹ï¼Œåˆ†ç±»å¤„ç†")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" childNodes = el.childNodes\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".from(childNodes).forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("node")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".isElement(node)) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç¼–è¯‘å…ƒç´ ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".compileElement(node)\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".isInterpolation(node)) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç¼–è¯‘æ’å€¼æ–‡æœ¬")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".text(node)\n      }\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// é€’å½’å¤„ç†å­èŠ‚ç‚¹")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (node.childNodes && node.childNodes.length > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".compile(node)\n      }\n    })\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç¼–è¯‘å…ƒç´ èŠ‚ç‚¹")]),s._v("\n  compileElement(node) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" attrs = node.attributes\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// éå†å±æ€§ï¼Œè§£ææŒ‡ä»¤")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".from(attrs).forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("attr")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" attrName = attr.name\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" attrValue = attr.value\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (attrName.startsWith("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'v-'")]),s._v(")) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// v-modelã€v-textã€v-htmlç­‰æŒ‡ä»¤")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// ä¾‹å¦‚ï¼šv-html="htmlContent"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è§£æå‡ºï¼šhtmlå’ŒhtmlContentï¼Œhtmlå¯¹åº”æ›´æ–°æ–¹æ³•ï¼ŒhtmlContentå¯¹åº”dataä¸­çš„å€¼")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dir = attrName.substring("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ‰§è¡Œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("[dir] && "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("[dir](node, attrValue)\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (attrName.startsWith("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@'")]),s._v(")) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// @click="clickHandle"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è§£æå‡ºclickï¼Œç»™å…ƒç´ æ·»åŠ å¯¹åº”çš„äº‹ä»¶ï¼Œå›è°ƒäº‹ä»¶çš„åç§°å°±æ˜¯clickHandle")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" event = attrName.substring("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ä»methodsé‡Œé¢å–å‡ºæ–¹æ³•")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" methods = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm.$options.methods\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" method = methods && methods[attrValue]\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è®¾ç½®äº‹ä»¶ç›‘å¬")]),s._v("\n        node.addEventListener(event, method.bind("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm))\n      }\n    })\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å¤„ç†æ’å€¼æ–‡æœ¬")]),s._v("\n  text(node) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è°ƒç”¨updateï¼Œç”ŸæˆtextUpdateræ–¹æ³•ï¼Œå¹¶æ‰§è¡Œè°ƒç”¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".update(node, "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("RegExp")]),s._v(".$"),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'text'")]),s._v(")\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å¤„ç†v-html")]),s._v("\n  html(node, exp) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è°ƒç”¨updateï¼Œç”ŸæˆhtmlUpdateræ–¹æ³•ï¼Œå¹¶æ‰§è¡Œè°ƒç”¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".update(node, exp, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'html'")]),s._v(")\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// å¤„ç†v-model")]),s._v("\n  model(node, exp) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// è°ƒç”¨updateï¼Œç”ŸæˆmodelUpdateræ–¹æ³•ï¼Œå¹¶æ‰§è¡Œè°ƒç”¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".update(node, exp, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'model'")]),s._v(")\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç›‘å¬äº‹ä»¶")]),s._v("\n    node.addEventListener("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", e => {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm[exp] = e.target.value\n    })\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç”Ÿæˆæ›´æ–°å‡½æ•°ï¼Œå¹¶æ‰§è¡Œï¼Œåˆ›å»ºå¯¹åº”çš„watcher")]),s._v("\n  update(node, exp, dir) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" fn = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("[dir + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Updater'")]),s._v("]\n    fn && fn(node, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm[exp])\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ›´æ–°")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Watcher("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$vm, exp, val => {\n      fn && fn(node, val)\n    })\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ›´æ–°å‡½æ•°")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// æ’å€¼")]),s._v("\n  textUpdater(node, val) {\n    node.textContent = val\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// v-html")]),s._v("\n  htmlUpdater(node, val) {\n    node.innerHTML = val\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// v-model")]),s._v("\n  modelUpdater(node, val) {\n    node.value = val\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ç±»å‹åˆ¤æ–­")]),s._v("\n  isElement(node) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" node.nodeType === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n  }\n\n  isInterpolation(node) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" node.nodeType === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\{\\{(.*)\\}\\}/")]),s._v(".test(node.textContent)\n  }\n}\n")])]),t("p",[s._v("ä»¥ä¸Šå°±å®ç°äº†ä¸€ä¸ªç®€å•çš„ "),t("code",{pre:!0},[s._v("mvvm")]),s._v(" æ¡†æ¶ï¼Œè¿™ä¹Ÿæ˜¯ "),t("code",{pre:!0},[s._v("vue1.x")]),s._v(" çš„å®ç°åŸç†ï¼Œåœ¨ "),t("code",{pre:!0},[s._v("vue1.x")]),s._v(" ä¸­ï¼Œæ²¡æœ‰å¼•å…¥è™šæ‹Ÿ "),t("code",{pre:!0},[s._v("DOM")]),s._v("ï¼Œå½“ç„¶ä¹Ÿæ²¡æœ‰ "),t("code",{pre:!0},[s._v("diff")]),s._v("ï¼Œ"),t("strong",[s._v("è¿™æ ·çš„å®ç°æ–¹å¼æœ‰ä»€ä¹ˆä¸è¶³å—?")])])])}],p=t("2877"),v={},_=Object(p["a"])(v,n,l,!1,null,null,null),c=_.exports,h={components:{md:c}},o=h,d=Object(p["a"])(o,e,r,!1,null,"7c802b7c",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d2225a4.05a158c8.js.map